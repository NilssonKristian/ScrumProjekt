@model ScrumProjekt.Models.PostViewModels

@using ScrumProjekt.Models

    @using Microsoft.AspNet.Identity


@*@{
        ViewBag.Title = "About";
    }
    <h2>@ViewBag.Title.</h2>
    <h3>@ViewBag.Message</h3>

    <p>Use this area to provide additional information.</p>*@

<!DOCTYPE html>
<html lang="en">

<body>
    @Html.Partial("CreatePostPartialView", new CreatePost { ForumId = Model.Forum.Id })

    <!-- Page Content -->
    @*<div class="container">

        <div class="row">*@

    <!-- Blog Entries Column -->
    <div class="col-md-8">
                <h1 class="my-4">@Model.Forum.ForumName</h1>

        @foreach (var post in Model.Posts)
        {
            <!-- Blog Post -->
            <div class="card mb-4">

                <div class="card-body">
                    <h2 class="card-title">Post Title</h2>
                    <p class="card-text">@post.Content</p>

                </div>
                <div class="card-footer text-muted">
                    <p>@post.TimeSent</p>
                    <p>@post.CategoryPostModels</p>
                    <p>@post.SenderId.Email</p>

                    <button type="button" onclick="location.href='@Url.Action("Edit", "Post")'">Edit</button>

                    <div class="card-body">
                        <h4 class="card-title">Post Title</h4>
                        <p class="card-text">@post.Content</p>

                    </div>
                    <div class="card-footer text-muted">
                        <p>@post.SenderId.FirstName</p>
                        <p>@post.SenderId.LastName</p>
                        <p>@post.TimeSent</p>
                        <p>@post.CategoryPostModels</p>
                        <p>@post.SenderId.Email</p>

                        @if (User.IsInRole("Admin") || User.Identity.GetUserId() == post.SenderId.Id)
                        {
                            <button type="button" onclick="location.href='@Url.Action("Edit", "Post", new { id = post.Id })'">Edit</button>
                        }
                        @if (User.IsInRole("Admin") || User.Identity.GetUserId() == post.SenderId.Id)
                        {
                            <button type="button" onclick="location.href='@Url.Action("Delete", "Post", new { id = post.Id })'">Delete</button>
                        }

                @foreach (var comment in Model.CommentList)
                {
                    if (post.Id == comment.Post.Id) { 
                <!-- Comment 1-->
                <div class="media mb-4">

                        <span class="badge badge-primary">@post.SenderId.FirstName</span>
                        @comment.Content
                    </div>
                </div>
                    }
                }

           
            </div>
      </div>
            @Html.Partial("CreateCommentPartial", new CommentViewModel { PostID = post.Id})
        }
        


        <!-- Sidebar Widgets Column -->
        <div class="col-md-4">

            <!-- Search Widget -->
            <div class="card my-4">
                <h5 class="card-header">Search</h5>
                <div class="card-body">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search for...">
                        <span class="input-group-btn">
                            <button class="btn btn-secondary" type="button">Go!</button>
                        </span>
                    </div>
                </div>
            </div>

            <!-- Categories Widget -->
            <div class="card my-4">
                <h5 class="card-header">Categories</h5>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <ul class="list-unstyled mb-0">
                                <li>
                                    <!-- Category 1-->
                                    <div class="form-group">
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="customCheck1" checked="">
                                            <label class="custom-control-label" for="customCheck1">Juridik</label>
                                        </div>
                                    </div>

                                    <!--Category 2-->
                                    <div class="form-group">
                                        <div class="custom-control custom-checkbox">
                                            <input type="checkbox" class="custom-control-input" id="customCheck2" checked="">
                                            <label class="custom-control-label" for="customCheck2">Genusvetenskap</label>
                                        </div>
                                    </div>
                                </li>

                            </ul>
                        </div>
                    </div>

                </div>

            </div>
            <!-- /.row -->


        </div>

        <!-- /.container -->
        <!-- Bootstrap core JavaScript -->
        <script src="vendor/jquery/jquery.min.js"></script>
        <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

</body>

</html>





@*@foreach (var post in Model.Posts)
        {

            @Html.AntiForgeryToken()
            <div class="col-md-offset-2 col-md-10 post" style="margin-top: 20px">
                <input type="submit" class="btn btn-primary btn-lg" value="Delete" />
            </div>
        }
    }


            <p>@post.SenderId.Email</p>
            <p>@post.Content</p>
            <br />
            <hr />

            using (Html.BeginForm("Delete", "Post", new { id = post.Id }, FormMethod.Post,  new { @class = "form-horizontal", role = "form" }))
            {
                @Html.AntiForgeryToken()
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" class="btn btn-default" value="Delete" />
                </div>
            }
        }*@

